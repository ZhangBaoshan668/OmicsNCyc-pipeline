/project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/software/fastp -i /project/wujp/zbs/Example_data/raw_data/SRR6834181.fastq.gz -o /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.clean.fq.gz -w 16 -j /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.json
echo -n "SRR6834181" | paste - - <(jq '.summary.after_filtering.total_reads' /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.json) | awk '{print $1 "	" $2}' > /project/wujp/zbs/Example_data/SRR6834181/SRR6834181_total_reads.txt
/project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/software/seqtk seq -a  /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.clean.fq.gz  >/project/wujp/zbs/Example_data/SRR6834181/SRR6834181.fa
awk 'BEGIN{FS=""; OFS=""; id=1} /^>/ {print ">SRR6834181_"id++; next} {print}' /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.fa > /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.rename.fa
cat gene.txt |cut -f1|xargs -I {} echo /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/software/diamond blastx -d /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/database/{} -q /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.rename.fa -o /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.txt -e 1e-05 --id 75 --query-cover 75 -f 6 -p 140 -k 1 > /project/wujp/zbs/Example_data/SRR6834181/diamond_blas.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/diamond_blas.sh 20
cat gene.txt |cut -f1|xargs -I {} echo 'paste -d '"'\t'"' <(echo -n "SRR6834181") <(cat /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.txt | cut -f1 | sort | uniq | wc -l) > /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.result.txt' > /project/wujp/zbs/Example_data/SRR6834181/sort_uniq.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/sort_uniq.sh 20
cat gene.txt |cut -f1|xargs -I {} echo "cat /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.txt | cut -f1 | sort | uniq > /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.id" > /project/wujp/zbs/Example_data/SRR6834181/id.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/id.sh 20
cat gene.txt |cut -f1|xargs -I {} echo "/project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/software/seqtk subseq /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.rename.fa /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.id > /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.target.fa" >/project/wujp/zbs/Example_data/SRR6834181/target.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/target.sh 20
cat gene.txt |cut -f1|xargs -I {} echo python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/calculate_rpkm.py /project/wujp/zbs/Example_data/SRR6834181/SRR6834181_total_reads.txt /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.result.txt gene.txt /project/wujp/zbs/Example_data/SRR6834181 {} >/project/wujp/zbs/Example_data/SRR6834181/rpkm.sh
sh /project/wujp/zbs/Example_data/SRR6834181/rpkm.sh
cat gene.txt |cut -f1| xargs -I {} echo /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/software/blastx -db /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/blast/{} -query /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.target.fa -out /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.tax_result.txt -max_target_seqs 1 -outfmt \'6 qseqid qlen sseqid sgi slen pident length mismatch gapopen qstart qend sstart send evalue bitscore staxid ssciname\' -num_threads 50 -evalue 1e-3 > /project/wujp/zbs/Example_data/SRR6834181/blastx.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/blastx.sh 20
cat gene.txt |cut -f1| xargs -I {} echo python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/tax_statistics.py {} SRR6834181 /project/wujp/zbs/Example_data/SRR6834181/{}_SRR6834181.tax_result.txt > /project/wujp/zbs/Example_data/SRR6834181/tax_result.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/tax_result.sh 20
cat gene.txt |cut -f1| xargs -I {} echo "cat gene.txt |cut -f2|xargs -I {[]} sh -c \"cat /project/wujp/zbs/Example_data/SRR6834181/SRR6834181_total_reads.txt|cut -f2|xargs -I [] python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/calculate_cpm.py /project/wujp/zbs/Example_data/SRR6834181 SRR6834181 [] {} {[]}\"" > /project/wujp/zbs/Example_data/SRR6834181/cpm_commands.sh
python3 /project/wujp/zbs/nitrogen_gene_pipline2/final_pipeline/sub/ParallelShellExecutor.py /project/wujp/zbs/Example_data/SRR6834181/cpm_commands.sh 20
rm -rf /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.clean.fq.gz
rm -rf /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.fa
rm -rf /project/wujp/zbs/Example_data/SRR6834181/SRR6834181.rename.fa
rm -rf /project/wujp/zbs/Example_data/SRR6834181/*plog
rm -rf /project/wujp/zbs/Example_data/SRR6834181/*sh
